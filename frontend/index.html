<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>SCP - Passwordless Authentication</title>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.2.0/css/all.css'>
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.2.0/css/fontawesome.css'><link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#callGo").on('click', function() {
                $.ajax({
                    url: "http://localhost:9000/callme",
                    method: "GET",
                    contentType: 'application/json;',
                    dataType: 'text',
                    success: function(result) {
                        var r=JSON.parse(result);
                        document.getElementById("response").innerHTML = r;
                        document.getElementById("is_user_created").src="resources/green-tick-white.png"
                    },
                    error: function(err) {
                        document.getElementById("response").innerHTML = "error";
                        console.log(err)
                        console.log("hej")
                        alert(err.response)
                    },
                    //complete: function (result) {
                    //    alert("ajax completed " + result.statusCode);
                    //}
                });
                return false;
            });
        });
        $(document).ready(function() {
            $("#authenticate").on('click', function() {
                $.ajax({
                    url: "http://localhost:9000/authenticate",
                    method: "GET",
                    contentType: 'application/json;',
                    dataType: 'text',
                    success: function(result) {
                        window.location.href = "authenticated.html";
                        return false
                    },
                    error: function(err) {
                        document.getElementById("response").innerHTML = "error";
                        console.log(err)
                        alert(err.response)
                    },
                    //complete: function (result) {
                    //    alert("ajax completed " + result.statusCode);
                    //}
                });
                return false;
            });
        });
        //here post
    </script>
</head>
<body>
<!-- partial:index.partial.html -->
<div class="container">
    <div class="screen">
        <div class="screen__content">
            <form class="login">
                <img class="key" src="resources/key-transparent.png">
                <h3>Passwordless Authentication</h3>
                <button id="callGo" class="button login__submit">
                    <span class="button__text">Create User</span>
                    <img id="is_user_created" src="">
                    <i class="button__icon fas fa-chevron-right"></i>
                </button>
                <div id="response">hello</div>
                <button id="authenticate" class="button login__submit" onclick="change_page()">
                    <span class="button__text">Authenticate Me</span>
                    <i class="button__icon fas fa-chevron-right"></i>
                </button>
            </form>
        </div>
        <div class="screen__background">
            <span class="screen__background__shape screen__background__shape4"></span>
            <span class="screen__background__shape screen__background__shape3"></span>
            <span class="screen__background__shape screen__background__shape2"></span>
            <span class="screen__background__shape screen__background__shape1"></span>
        </div>
    </div>
</div>
<!-- partial -->
</body>
</html>
